# ğŸŒŸ Intelligent Tour Planner (é‡æ„ç‰ˆ)

åŸºäºé˜Ÿå‹ç®—æ³•è®¾è®¡çš„æ™ºèƒ½æ—…æ¸¸è§„åˆ’å™¨ï¼Œå®ç°äº†å¢å¼ºèƒŒåŒ…ç®—æ³•å’Œä¸¤é˜¶æ®µè·¯å¾„ä¼˜åŒ–ã€‚

## ğŸ§  æ ¸å¿ƒç®—æ³•

### Step 1: Variant Knapsack for Interdependent Travel Attraction Costs
- **ç»¼åˆè¯„åˆ†ç³»ç»Ÿ**: `attraction_score = (review_rating Ã— weight_rating) + (preference_match_score Ã— weight_preference) - (travel_penalty Ã— weight_travel)`
- **ç”¨æˆ·åå¥½æ–¹æ³•**: é¢„è®¾æ—…è¡Œé£æ ¼ + ç±»åˆ«åå¥½æƒé‡
- **Top-Næ—…è¡Œæƒ©ç½š**: é¼“åŠ±é€‰æ‹©è¿é€šæ€§å¥½çš„æ™¯ç‚¹ç°‡
- **ä½ç½®æ„ŸçŸ¥èƒŒåŒ…**: è¿­ä»£è´ªå¿ƒï¼Œè€ƒè™‘ä»å½“å‰ä½ç½®çš„æ•ˆç‡å¾—åˆ†

### Step 2: Two-Phase Heuristic Route Optimization
- **æœ€è¿‘é‚»åˆå§‹åŒ–**: æ„å»ºåˆå§‹å¯è¡Œè·¯å¾„
- **2-Optå±€éƒ¨æœç´¢**: æ¶ˆé™¤è·¯å¾„äº¤å‰ï¼Œä¼˜åŒ–æ—…è¡Œæ—¶é—´
- **å®æ—¶æ•°æ®é›†æˆ**: Google Maps API + äº¤é€šé¢„æµ‹
- **é¢„æµ‹å»ºæ¨¡**: å†å²æ¨¡å‹ + å®‰å…¨ç¼“å†²

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
src/
â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ place.py           # æ™¯ç‚¹æ•°æ®ç±»
â”‚   â””â”€â”€ user_preferences.py # ç”¨æˆ·åå¥½ç³»ç»Ÿ
â”œâ”€â”€ api/                    # APIå°è£…å±‚
â”‚   â”œâ”€â”€ google_places.py   # Google Places API
â”‚   â””â”€â”€ google_maps.py     # Distance Matrix API
â”œâ”€â”€ algorithms/             # æ ¸å¿ƒç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ scoring.py         # ç»¼åˆè¯„åˆ†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ travel_penalty.py  # æ—…è¡Œæƒ©ç½šè®¡ç®—
â”‚   â”œâ”€â”€ enhanced_knapsack.py # å¢å¼ºèƒŒåŒ…ç®—æ³•
â”‚   â””â”€â”€ route_optimizer.py # è·¯å¾„ä¼˜åŒ–ç®—æ³•
â”œâ”€â”€ core/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ tour_planner.py    # ä¸»è¦åè°ƒå™¨
â””â”€â”€ utils/                  # å·¥å…·æ¨¡å—
    â”œâ”€â”€ input_handler.py   # ç”¨æˆ·è¾“å…¥å¤„ç†
    â””â”€â”€ output_formatter.py # ç»“æœæ ¼å¼åŒ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè®¾ç½®
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd intelligent-tour-planner

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è®¾ç½®APIå¯†é’¥
export GOOGLE_MAPS_API_KEY="your_api_key_here"
```

### 2. è¿è¡Œæ–¹å¼

#### äº¤äº’å¼ç•Œé¢
```bash
python3 main_refactored.py
```

#### ç¼–ç¨‹æ¥å£
```python
from src.core.tour_planner import IntelligentTourPlanner
from src.models.user_preferences import UserPreferences, TravelStyle

# åˆ›å»ºè§„åˆ’å™¨
planner = IntelligentTourPlanner(api_key="your_key")

# è®¾ç½®ç”¨æˆ·åå¥½
user_prefs = UserPreferences()
user_prefs.travel_style = TravelStyle.BALANCED_TRAVELER

# æ‰§è¡Œè§„åˆ’
result = planner.plan_tour(
    city="Vancouver",
    user_preferences=user_prefs,
    time_limit=300,  # 5å°æ—¶
    travel_mode="walking"
)

# å¤„ç†ç»“æœ
if result["success"]:
    print(f"é€‰ä¸­ {len(result['selected_places'])} ä¸ªæ™¯ç‚¹")
    print(f"æ€»å¾—åˆ†: {result['statistics']['total_composite_score']:.2f}")
```

### 3. æµ‹è¯•ç³»ç»Ÿ
```bash
# åŸºç¡€ç®—æ³•æµ‹è¯•
python3 test_refactor.py

# å®Œæ•´ç³»ç»Ÿæµ‹è¯•
python3 test_complete_system.py
```

## ğŸ¯ ç”¨æˆ·åå¥½ç³»ç»Ÿ

### æ—…è¡Œé£æ ¼
- **å“è´¨æ¢ç´¢è€…**: é‡è§†æ™¯ç‚¹è´¨é‡å’Œè¯„åˆ†
- **é«˜æ•ˆæ¸¸å®¢**: ä¼˜åŒ–æ—¶é—´æ•ˆç‡å’Œæ—…è¡Œè·¯å¾„
- **å¹³è¡¡æ—…è¡Œè€…**: å¹³è¡¡è´¨é‡ã€åå¥½å’Œæ•ˆç‡
- **è‡ªå®šä¹‰**: æ‰‹åŠ¨è®¾ç½®ç®—æ³•æƒé‡

### ç±»åˆ«åå¥½
- ğŸ¨ **è‰ºæœ¯ç±»**: åšç‰©é¦†ã€ç”»å»Š
- ğŸ½ï¸ **ç¾é£Ÿç±»**: é¤å…ã€å¸‚åœº
- ğŸŒ³ **è‡ªç„¶ç±»**: å…¬å›­ã€æµ·æ»©
- ğŸ›ï¸ **æ–‡åŒ–ç±»**: å†å²é—è¿¹ã€å»ºç­‘
- ğŸ›ï¸ **è´­ç‰©ç±»**: å•†åœºã€å•†åº—
- ğŸ­ **å¨±ä¹ç±»**: æ¸¸ä¹å›­ã€å‰§é™¢

## ğŸ“Š ç®—æ³•æ€§èƒ½

### å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**: O(nÂ²) - é¿å…æŒ‡æ•°çº§çŠ¶æ€ç©ºé—´
- **ç©ºé—´å¤æ‚åº¦**: O(n) - é«˜æ•ˆå†…å­˜ä½¿ç”¨
- **æ‰©å±•æ€§**: æ”¯æŒ100+æ™¯ç‚¹çš„å®æ—¶è§„åˆ’

### æ€§èƒ½æŒ‡æ ‡
- **é€‰æ‹©æ•ˆç‡**: ç»¼åˆå¾—åˆ†/æ—¶é—´æ¶ˆè€—
- **è·¯å¾„ä¼˜åŒ–**: 2-Optæ”¹è¿›ç¨‹åº¦
- **ç”¨æˆ·æ»¡æ„åº¦**: åå¥½åŒ¹é…ç¨‹åº¦

## ğŸ”¬ æµ‹è¯•ç»“æœç¤ºä¾‹

```
ğŸ‰ Vancouver (æµ‹è¯•) æ—…æ¸¸è§„åˆ’å®Œæˆï¼
============================================================
ğŸ“Š è§„åˆ’ç®—æ³•: é˜Ÿå‹è®¾è®¡çš„ä¸¤é˜¶æ®µç®—æ³•
â±ï¸ è§„åˆ’è€—æ—¶: 0.1 ç§’
ğŸ¯ æ—…è¡Œé£æ ¼: balanced_traveler

ğŸ§  ç®—æ³•æ€§èƒ½åˆ†æ
----------------------------------------
ğŸ“¦ Step 1 - å¢å¼ºèƒŒåŒ…ç®—æ³•:
  å€™é€‰æ™¯ç‚¹: 5 ä¸ª
  é€‰ä¸­æ™¯ç‚¹: 3 ä¸ª
  ç»¼åˆå¾—åˆ†: 12.64
  é€‰æ‹©æ•ˆç‡: 0.060 å¾—åˆ†/åˆ†é’Ÿ

ğŸ›£ï¸ Step 2 - è·¯å¾„ä¼˜åŒ–:
  ç®—æ³•: Two-Phase Heuristic (Nearest Neighbor + 2-Opt)
  è·¯å¾„æ”¹è¿›: 15.2%

ğŸ›ï¸ é€‰ä¸­çš„æ™¯ç‚¹ (3 ä¸ª)
----------------------------------------
1. Stanley Park - 4.6â­ (90åˆ†é’Ÿ)
2. Vancouver Art Gallery - 4.2â­ (75åˆ†é’Ÿ)  
3. Granville Island Market - 4.4â­ (60åˆ†é’Ÿ)
```

## ğŸ› ï¸ å¼€å‘ç‰¹æ€§

### ä»£ç è´¨é‡
- âœ… å®Œå…¨æ¨¡å—åŒ–è®¾è®¡
- âœ… ç±»å‹æ³¨è§£æ”¯æŒ
- âœ… å…¨é¢é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†æ–‡æ¡£æ³¨é‡Š

### æµ‹è¯•è¦†ç›–
- âœ… å•å…ƒæµ‹è¯•
- âœ… é›†æˆæµ‹è¯•  
- âœ… ç®—æ³•æ¯”è¾ƒæµ‹è¯•
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•

### æ‰©å±•æ€§
- âœ… æ’ä»¶å¼ç®—æ³•æ¶æ„
- âœ… å¯é…ç½®è¯„åˆ†æƒé‡
- âœ… å¤šäº¤é€šæ–¹å¼æ”¯æŒ
- âœ… è‡ªå®šä¹‰æ™¯ç‚¹ç±»åˆ«

## ğŸ“ˆ ç›¸æ¯”åŸç‰ˆçš„æ”¹è¿›

| ç‰¹æ€§ | åŸç‰ˆæœ¬ | é‡æ„ç‰ˆæœ¬ |
|------|--------|----------|
| ä»£ç è¡Œæ•° | 826è¡Œå•æ–‡ä»¶ | 1000+è¡Œæ¨¡å—åŒ– |
| ç®—æ³•è®¾è®¡ | ç®€å•èƒŒåŒ…+TSP | å¢å¼ºèƒŒåŒ…+ä¸¤é˜¶æ®µä¼˜åŒ– |
| ç”¨æˆ·åå¥½ | æ—  | å®Œæ•´åå¥½ç³»ç»Ÿ |
| è¯„åˆ†ç®—æ³• | ratingÃ—2 | ç»¼åˆè¯„åˆ†å…¬å¼ |
| è·¯å¾„ä¼˜åŒ– | æœ€è¿‘é‚» | æœ€è¿‘é‚»+2-Opt |
| å¯ç»´æŠ¤æ€§ | å›°éš¾ | é«˜åº¦æ¨¡å—åŒ– |
| æµ‹è¯•è¦†ç›– | åŸºç¡€ | å…¨é¢æµ‹è¯•å¥—ä»¶ |

## ğŸ”® æœªæ¥å‘å±•æ–¹å‘

1. **æœºå™¨å­¦ä¹ å¢å¼º**: ç”¨æˆ·è¡Œä¸ºå­¦ä¹ å’Œä¸ªæ€§åŒ–æ¨è
2. **å¤šç›®æ ‡ä¼˜åŒ–**: é¢„ç®—ã€å¤©æ°”ã€å®æ—¶äº‹ä»¶ç­‰çº¦æŸ
3. **å¯è§†åŒ–ç•Œé¢**: Webç«¯å’Œç§»åŠ¨ç«¯åº”ç”¨
4. **ç¤¾äº¤åŠŸèƒ½**: è·¯çº¿åˆ†äº«å’Œç¤¾åŒºè¯„ä»·
5. **å®æ—¶è°ƒæ•´**: GPSè·Ÿè¸ªå’ŒåŠ¨æ€é‡è§„åˆ’

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è”ç³»

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---
**åŸºäºé˜Ÿå‹ç®—æ³•è®¾è®¡ï¼Œå®Œå…¨é‡æ„å®ç° ğŸš€**
